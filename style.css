/* =========================
   Match-3 — style.css (layout iOS safe)
   Objectif : pas de scroll page, pas de zoom, mais objectifs toujours visibles
   ========================= */

:root{
  --bg0:#070b12;
  --bg1:#0a101a;
  --panel:#0c1422;
  --panel2:#0a1220;
  --stroke:rgba(255,255,255,.08);
  --stroke2:rgba(255,255,255,.12);
  --text:#e8eefc;
  --muted:rgba(232,238,252,.70);
  --shadow:0 16px 40px rgba(0,0,0,.45);

  --r:18px;
  --r2:22px;

  --gap:14px;
  --pad:16px;

  /* hauteur max du panneau objectifs (en bas) */
  --objMax: 22dvh;
}

/* iOS: hauteur fiable */
html{
  height: 100%;
  height: -webkit-fill-available;
  background: radial-gradient(1200px 700px at 30% 0%, #0b1422 0%, var(--bg0) 50%, #060910 100%);
  color: var(--text);

  /* anti-zoom/scroll */
  overflow: hidden;
  -webkit-text-size-adjust: 100%;
  touch-action: manipulation;
}

body{
  margin:0;
  height: 100%;
  height: -webkit-fill-available;
  background: transparent;
  overflow: hidden; /* pas de scroll global */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Inter, Arial, sans-serif;
}

/* Conteneur principal (si tu as .app ou .container, on couvre large) */
#app, .app, .container, main{
  height: 100dvh;                 /* clé iOS */
  height: -webkit-fill-available; /* fallback */
  overflow: hidden;
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  padding: var(--pad);
  box-sizing: border-box;
}

/* Header / HUD : on évite qu’il “mange” le bas */
header, .header, .hud{
  flex: 0 0 auto;
}

/* Cartes score */
.stats, .scoreRow{
  display:flex;
  gap:12px;
  flex-wrap: wrap;
  align-items: center;
}

.statCard, .stat{
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border: 1px solid var(--stroke);
  border-radius: var(--r2);
  padding: 10px 14px;
  min-width: 108px;
  box-shadow: 0 10px 22px rgba(0,0,0,.22);
}

.statCard .label, .stat .label{
  color: var(--muted);
  font-size: 13px;
  letter-spacing: .2px;
}

.statCard .value, .stat .value{
  font-size: 28px;
  font-weight: 800;
  margin-top: 2px;
}

/* Boutons */
.actions, .buttons, .btnRow{
  display:flex;
  gap:12px;
  flex-wrap: wrap;
}

button{
  appearance: none;
  border: 1px solid var(--stroke2);
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
  color: var(--text);
  border-radius: 999px;
  padding: 10px 16px;
  font-weight: 700;
  letter-spacing: .2px;
  box-shadow: 0 10px 24px rgba(0,0,0,.25);
}

button:active{ transform: translateY(1px); }

/* Zone jeu : prend TOUT l’espace restant */
.gameArea, .boardArea, .playArea{
  flex: 1 1 auto;
  min-height: 0; /* IMPORTANT pour iOS + flex */
  display:flex;
  align-items: center;
  justify-content: center;
}

/* Canvas : carré, responsive, sans déborder */
#game{
  width: min(92vw, 520px);
  aspect-ratio: 1 / 1;
  height: auto;
  display:block;

  background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
  border: 1px solid rgba(255,255,255,.07);
  border-radius: 28px;
  box-shadow: var(--shadow);
}

/* Panneau objectifs : TOUJOURS visible, scroll interne seulement si nécessaire */
.objectives, .objectivesPanel, #objectivesWrap, .goalsPanel, .panelObjectives{
  flex: 0 0 auto;
  max-height: var(--objMax);
  min-height: 120px;
  overflow: auto; /* scroll interne */
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;

  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border: 1px solid var(--stroke);
  border-radius: 22px;
  padding: 14px 16px;
  box-shadow: 0 14px 34px rgba(0,0,0,.35);
}

/* Texte objectifs */
.objectives h2, .objectivesPanel h2, .goalsPanel h2{
  margin:0 0 10px 0;
  font-size: 22px;
  font-weight: 900;
}

#objectives, .objectives ul{
  margin: 0;
  padding-left: 20px;
  line-height: 1.5;
  font-size: 18px;
}

#objectives li{
  margin: 8px 0;
}

/* Modals (si présents) */
.modal, .overlay{
  position: fixed;
  inset: 0;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: 999;
}

.hidden{ display:none !important; }

/* Micro: éviter le petit “saut” iOS lors de focus/scroll */
*{ -webkit-tap-highlight-color: transparent; }