<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>Match-3</title>
  <link rel="stylesheet" href="./style.css?v=2200" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="brandTitle">Match-3</div>
      <div class="brandSub">Niv <b id="level">1</b></div>
    </div>

    <div class="hudCards">
      <div class="card">
        <div class="label">â­ Best</div>
        <div class="value" id="best">0</div>
      </div>
      <div class="card">
        <div class="label">ğŸ¯ Score</div>
        <div class="value" id="score">0</div>
      </div>
      <div class="card">
        <div class="label">ğŸª„ Coups</div>
        <div class="value" id="moves">0</div>
      </div>
    </div>

    <div class="actions">
      <button id="newGame" type="button">Recommencer</button>
      <button id="openLevels" type="button">Niveaux</button>
    </div>
  </header>

  <main class="layout">
    <section class="boardWrap">
      <canvas id="game" width="640" height="640" aria-label="Jeu match-3"></canvas>
    </section>

    <section class="dock" aria-label="Objectifs du niveau">
      <div class="dockHeader">
        <div class="dockTitle">Objectifs</div>
        <div id="status" class="status"></div>
      </div>
      <ul id="objectives" class="objectives"></ul>
    </section>
  </main>

  <!-- Modal victoire -->
  <div id="winModal" class="modal hidden" role="dialog" aria-modal="true" aria-label="Victoire">
    <div class="modalCard">
      <div class="modalTitle">ğŸ‰ Niveau rÃ©ussi !</div>
      <div class="modalText" id="winText">Objectifs remplis âœ…</div>
      <div class="modalButtons">
        <button id="winRestart" type="button">Recommencer</button>
        <button id="winNext" type="button">Niveau suivant</button>
        <button id="winLevels" type="button">Menu niveaux</button>
      </div>
    </div>
  </div>

  <!-- Modal game over -->
  <div id="loseModal" class="modal hidden" role="dialog" aria-modal="true" aria-label="Game Over">
    <div class="modalCard">
      <div class="modalTitle">ğŸ’€ Game Over</div>
      <div class="modalText" id="loseText">Objectifs non atteintsâ€¦</div>
      <ul class="modalList" id="loseDetails"></ul>
      <div class="modalButtons">
        <button id="loseRestart" type="button">RÃ©essayer</button>
        <button id="loseLevels" type="button">Menu niveaux</button>
      </div>
    </div>
  </div>

  <!-- Modal menu niveaux -->
  <div id="levelsModal" class="modal hidden" role="dialog" aria-modal="true" aria-label="Menu niveaux">
    <div class="modalCard">
      <div class="modalTitle">ğŸ—ºï¸ Choisir un niveau</div>
      <div class="modalText">SÃ©lectionne un niveau Ã  lancer.</div>
      <div id="levelsGrid" class="levelsGrid"></div>
      <div class="modalButtons">
        <button id="levelsClose" type="button">Fermer</button>
      </div>
    </div>
  </div>

  <!-- Overlay dâ€™erreur (si crash JS) -->
  <div id="bootError" class="bootError hidden"></div>

  <script src="./game.js?v=2200"></script>
</body>
</html>